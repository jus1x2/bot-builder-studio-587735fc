import { motion } from 'framer-motion';
import { X, MessageSquare, Clock, MoreHorizontal, ArrowRight, Link, Edit3, Tag, GitBranch, ShoppingCart, Trophy, HelpCircle } from 'lucide-react';
import { ActionType, ACTION_INFO } from '@/types/bot';
import { ScrollArea } from '@/components/ui/scroll-area';

interface ActionHelpPanelProps {
  actionType: ActionType;
  onClose: () => void;
}

const actionHelp: Record<ActionType, {
  howToUse: string;
  whatHappens: string;
  chatExample?: {
    messages: Array<{ type: 'bot' | 'user' | 'typing'; text: string }>;
  };
  tips?: string[];
}> = {
  show_text: {
    howToUse: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ–ª–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ {first_name}, {username} –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏.',
    whatHappens: '–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.',
    chatExample: {
      messages: [
        { type: 'bot', text: '–ü—Ä–∏–≤–µ—Ç, –ò–≤–∞–Ω! üëã' },
        { type: 'bot', text: '–†–∞–¥ –≤–∏–¥–µ—Ç—å —Ç–µ–±—è —Å–Ω–æ–≤–∞!' },
      ],
    },
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ {first_name} –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–∏', 'Markdown: *–∂–∏—Ä–Ω—ã–π*, _–∫—É—Ä—Å–∏–≤_, `–∫–æ–¥`'],
  },
  delay: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–æ—Ç 0 –¥–æ 300). –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é "–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—á–∞—Ç–∞–µ—Ç" –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏.',
    whatHappens: '–ë–æ—Ç —Å–¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—É –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –¥–µ–π—Å—Ç–≤–∏–µ–º. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞.',
    chatExample: {
      messages: [
        { type: 'bot', text: '–°–µ–∫—É–Ω–¥—É, –ø—Ä–æ–≤–µ—Ä—è—é...' },
        { type: 'typing', text: '‚è≥ 3 —Å–µ–∫' },
        { type: 'bot', text: '–ì–æ—Ç–æ–≤–æ! –í–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.' },
      ],
    },
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞', '–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 1-3 —Å–µ–∫—É–Ω–¥—ã'],
  },
  typing_indicator: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (1-10).',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç "–ø–µ—á–∞—Ç–∞–µ—Ç..." –ø–æ–¥ –∏–º–µ–Ω–µ–º –±–æ—Ç–∞, –∫–∞–∫ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–µ.',
    chatExample: {
      messages: [
        { type: 'typing', text: '–ø–µ—á–∞—Ç–∞–µ—Ç...' },
      ],
    },
    tips: ['–°–æ–∑–¥–∞—ë—Ç —ç—Ñ—Ñ–µ–∫—Ç –∂–∏–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è', '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏'],
  },
  navigate_menu: {
    howToUse: '–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª–µ–≤–æ–µ –º–µ–Ω—é –∏–∑ —Å–ø–∏—Å–∫–∞. –ë–æ—Ç –ø–µ—Ä–µ–π–¥—ë—Ç –∫ –Ω–µ–º—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è.',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –º–µ–Ω—é —Å –µ–≥–æ –∫–Ω–æ–ø–∫–∞–º–∏ –∏ —Ç–µ–∫—Å—Ç–æ–º.',
    chatExample: {
      messages: [
        { type: 'user', text: 'üìã –ö–∞—Ç–∞–ª–æ–≥' },
        { type: 'bot', text: '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:' },
      ],
    },
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏', '–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–µ–Ω—é'],
  },
  open_url: {
    howToUse: '–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π URL (–≤–∫–ª—é—á–∞—è https://). –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–∫—Ä—ã—Ç–∏—è.',
    whatHappens: '–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–π–¥—ë—Ç –ø–æ —Å—Å—ã–ª–∫–µ –≤–æ –≤–Ω–µ—à–Ω–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ Telegram.',
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ —Å–∞–π—Ç, –æ–ø–ª–∞—Ç—É', 'Telegram Web Apps –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'],
  },
  set_field: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –∏–º—è –ø–æ–ª—è –∏ –∑–Ω–∞—á–µ–Ω–∏–µ. –ü–æ–ª–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.',
    whatHappens: '–ó–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.',
    tips: ['–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', '–ù–∞–ø—Ä–∏–º–µ—Ä: user.city, user.subscription'],
  },
  change_field: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ —á–∏—Å–ª–æ–≤–æ–µ –ø–æ–ª–µ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (+/-). –ù–∞–ø—Ä–∏–º–µ—Ä: +10 –∫ –±–∞–ª–ª–∞–º.',
    whatHappens: '–ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è —É–≤–µ–ª–∏—á–∏—Ç—Å—è –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –≤–µ–ª–∏—á–∏–Ω—É.',
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –±–∞–ª–ª–æ–≤, —Å—á—ë—Ç—á–∏–∫–æ–≤', '–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏'],
  },
  add_tag: {
    howToUse: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤. –¢–µ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏.',
    whatHappens: '–¢–µ–≥ –¥–æ–±–∞–≤–∏—Ç—Å—è –∫ –ø—Ä–æ—Ñ–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ä–∞—Å—Å—ã–ª–æ–∫.',
    tips: ['–ü—Ä–∏–º–µ—Ä—ã: VIP, interested, completed_quiz', '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏'],
  },
  remove_tag: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ —Ç–µ–≥ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è. –¢–µ–≥ –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –≤–∫–ª—é—á—ë–Ω –≤ —Å–µ–≥–º–µ–Ω—Ç —Å —ç—Ç–∏–º —Ç–µ–≥–æ–º.',
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞', '–ù–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–∞ "new_user"'],
  },
  if_else: {
    howToUse: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—Å–ª–æ–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –≤–µ—Ç–æ–∫ "–¥–∞" –∏ "–Ω–µ—Ç".',
    whatHappens: '–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç —É—Å–ª–æ–≤–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Ç–∫—É –¥–µ–π—Å—Ç–≤–∏–π.',
    tips: ['–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏', '–ú–æ–∂–Ω–æ –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞'],
  },
  check_subscription: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ @username –∫–∞–Ω–∞–ª–∞. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç, –ø–æ–¥–ø–∏—Å–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.',
    whatHappens: '–î–µ–π—Å—Ç–≤–∏–µ –≤–µ—Ä–Ω—ë—Ç true/false –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –ø–æ–¥–ø–∏—Å–∫–∏.',
    chatExample: {
      messages: [
        { type: 'bot', text: 'üì¢ –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ @channel –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è' },
        { type: 'user', text: '‚úÖ –ü–æ–¥–ø–∏—Å–∞–ª—Å—è' },
        { type: 'bot', text: 'üéâ –û—Ç–ª–∏—á–Ω–æ! –î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç!' },
      ],
    },
    tips: ['–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–¥–º–∏–Ω–æ–º –∫–∞–Ω–∞–ª–∞', '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞'],
  },
  wait_response: {
    howToUse: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–π–º–∞—É—Ç –∏ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –µ–≥–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏. –û—Ç–≤–µ—Ç –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–æ–ª–µ.',
    whatHappens: '–ë–æ—Ç –±—É–¥–µ—Ç –∂–¥–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.',
    chatExample: {
      messages: [
        { type: 'bot', text: '–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?' },
        { type: 'user', text: '–ò–≤–∞–Ω' },
        { type: 'bot', text: '–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, –ò–≤–∞–Ω!' },
      ],
    },
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö', '–£–∫–∞–∂–∏—Ç–µ —Ç–∞–π–º–∞—É—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–ª—á–∞–Ω–∏—è'],
  },
  keyword_trigger: {
    howToUse: '–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.',
    whatHappens: '–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä.',
    tips: ['–¢–∏–ø—ã: —Å–æ–¥–µ—Ä–∂–∏—Ç, —Ç–æ—á–Ω–æ–µ, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å', '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ FAQ'],
  },
  add_to_cart: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ ID —Ç–æ–≤–∞—Ä–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.',
    whatHappens: '–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–∏—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
    chatExample: {
      messages: [
        { type: 'user', text: 'üõí –í –∫–æ—Ä–∑–∏–Ω—É' },
        { type: 'bot', text: '‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!' },
      ],
    },
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–º–µ—Å—Ç–µ —Å show_cart', '–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π'],
  },
  show_cart: {
    howToUse: '–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –û—Ç–æ–±—Ä–∞–∑–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã.',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ —Å —Ü–µ–Ω–∞–º–∏ –∏ –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º–æ–π.',
    tips: ['–î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫–∏ "–û—Ñ–æ—Ä–º–∏—Ç—å" –∏ "–û—á–∏—Å—Ç–∏—Ç—å"', '–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞'],
  },
  process_payment: {
    howToUse: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–ª–∞—Ç—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∏ —Å—É–º–º—É. –ë–æ—Ç —Å–æ–∑–¥–∞—Å—Ç —Å—á—ë—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É.',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç –∫–Ω–æ–ø–∫—É –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Telegram Payments.',
    tips: ['–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞', '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ on_payment_success –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏'],
  },
  random_result: {
    howToUse: '–î–æ–±–∞–≤—å—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. –û–¥–∏–Ω –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω —Å–ª—É—á–∞–π–Ω–æ.',
    whatHappens: '–ë–æ—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±–µ—Ä–µ—Ç –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.',
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∏–≥—Ä –∏ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π', '–í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–≤–Ω–æ–≤–µ—Ä–æ—è—Ç–Ω—ã'],
  },
  quiz: {
    howToUse: '–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤. –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –≤–æ–ø—Ä–æ—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –¥–∞–ª—å—à–µ.',
    chatExample: {
      messages: [
        { type: 'bot', text: '‚ùì –°—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏?' },
        { type: 'user', text: '–ú–æ—Å–∫–≤–∞' },
        { type: 'bot', text: '‚úÖ –í–µ—Ä–Ω–æ!' },
      ],
    },
    tips: ['–î–æ–±–∞–≤–ª—è–π—Ç–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –∫ –æ—Ç–≤–µ—Ç–∞–º', '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–æ–≤'],
  },
  send_notification: {
    howToUse: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Å–æ –∑–≤—É–∫–æ–º/–±–µ–∑).',
    whatHappens: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram.',
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π', '–ë–µ–∑ –∑–≤—É–∫–∞ ‚Äî –¥–ª—è –º–µ–Ω–µ–µ —Å—Ä–æ—á–Ω—ã—Ö'],
  },
  schedule_message: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.',
    whatHappens: '–°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.',
    tips: ['–î–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏ follow-up', '–í—Ä–µ–º—è —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö'],
  },
  broadcast: {
    howToUse: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–≥–º–µ–Ω—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏.',
    whatHappens: '–°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞.',
    tips: ['–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥–∏ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏', '–ù–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏'],
  },
  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–≤—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
  append_to_list: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.',
    whatHappens: '–ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–±–∞–≤–∏—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
  },
  clear_field: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏.',
    whatHappens: '–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
  },
  check_role: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ —Ä–æ–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (admin, moderator –∏ —Ç.–¥.).',
    whatHappens: '–ü—Ä–æ–≤–µ—Ä–∏—Ç, –∏–º–µ–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–Ω–Ω—É—é —Ä–æ–ª—å.',
  },
  check_value: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–µ, –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –∑–Ω–∞—á–µ–Ω–∏–µ.',
    whatHappens: '–°—Ä–∞–≤–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º.',
  },
  no_response: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –º–æ–ª—á–∞–Ω–∏–∏.',
    whatHappens: '–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ.',
  },
  wrong_response: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –∏ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ.',
    whatHappens: '–û–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.',
  },
  update_quantity: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ ID —Ç–æ–≤–∞—Ä–∞ –∏ –Ω–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.',
    whatHappens: '–ò–∑–º–µ–Ω–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ.',
  },
  show_product: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ ID —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.',
    whatHappens: '–ü–æ–∫–∞–∂–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Ü–µ–Ω–æ–π.',
  },
  remove_from_cart: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ ID —Ç–æ–≤–∞—Ä–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è.',
    whatHappens: '–£–¥–∞–ª–∏—Ç —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
  },
  check_stock: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ ID —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.',
    whatHappens: '–ü—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ.',
  },
  apply_promo: {
    howToUse: '–ü—Ä–æ–º–æ–∫–æ–¥ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—ë–Ω –∫ –∫–æ—Ä–∑–∏–Ω–µ.',
    whatHappens: '–°–∫–∏–¥–∫–∞ –¥–æ–±–∞–≤–∏—Ç—Å—è –∫ –∑–∞–∫–∞–∑—É, –µ—Å–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω.',
  },
  clear_cart: {
    howToUse: '–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.',
    whatHappens: '–û—á–∏—Å—Ç–∏—Ç –∫–æ—Ä–∑–∏–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é.',
  },
  weighted_random: {
    howToUse: '–î–æ–±–∞–≤—å—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –≤–µ—Å–∞–º–∏ (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏).',
    whatHappens: '–í—ã–±–µ—Ä–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç —Å —É—á—ë—Ç–æ–º –∑–∞–¥–∞–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤.',
  },
  lottery: {
    howToUse: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏–∑—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π.',
    whatHappens: '–ü—Ä–æ–≤–µ–¥—ë—Ç —Ä–æ–∑—ã–≥—Ä—ã—à —Å—Ä–µ–¥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.',
  },
  leaderboard: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–µ –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç.',
    whatHappens: '–ü–æ–∫–∞–∂–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–æ–ª—é.',
  },
  modify_points: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è/—Å–ø–∏—Å–∞–Ω–∏—è.',
    whatHappens: '–ò–∑–º–µ–Ω–∏—Ç –±–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.',
  },
  spam_protection: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –ª–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ.',
    whatHappens: '–ó–∞—â–∏—Ç–∏—Ç –æ—Ç —Å–ø–∞–º–∞, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è —á–∞—Å—Ç–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–π.',
  },
  request_input: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ-–∑–∞–ø—Ä–æ—Å.',
    whatHappens: '–ó–∞–ø—Ä–æ—Å–∏—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–≤–æ–¥ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞.',
  },
  on_payment_success: {
    howToUse: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã.',
    whatHappens: '–°—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞.',
  },
  on_first_visit: {
    howToUse: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.',
    whatHappens: '–°—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.',
  },
  on_timer: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è –∏ –¥–µ–π—Å—Ç–≤–∏–µ.',
    whatHappens: '–í—ã–ø–æ–ª–Ω–∏—Ç –¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.',
  },
  on_threshold: {
    howToUse: '–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–µ –∏ –ø–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.',
    whatHappens: '–°—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞.',
  },
};

export function ActionHelpPanel({ actionType, onClose }: ActionHelpPanelProps) {
  const info = ACTION_INFO[actionType];
  const help = actionHelp[actionType];

  if (!help) return null;

  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      className="fixed inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4"
      onClick={onClose}
    >
      <motion.div
        initial={{ scale: 0.95, opacity: 0, y: 20 }}
        animate={{ scale: 1, opacity: 1, y: 0 }}
        exit={{ scale: 0.95, opacity: 0, y: 20 }}
        transition={{ type: 'spring', damping: 25, stiffness: 300 }}
        onClick={(e) => e.stopPropagation()}
        className="w-full max-w-lg bg-card rounded-2xl border border-border shadow-2xl overflow-hidden"
      >
        {/* Header */}
        <div className="flex items-center justify-between px-6 py-4 border-b border-border bg-gradient-to-r from-primary/10 to-transparent">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center">
              <HelpCircle className="w-5 h-5 text-primary" />
            </div>
            <div>
              <h2 className="text-lg font-semibold text-foreground">{info?.name}</h2>
              <p className="text-xs text-muted-foreground">{info?.description}</p>
            </div>
          </div>
          <button
            onClick={onClose}
            className="p-2 rounded-lg hover:bg-muted transition-colors"
          >
            <X className="w-5 h-5 text-muted-foreground" />
          </button>
        </div>

        <ScrollArea className="max-h-[60vh]">
          <div className="p-6 space-y-6">
            {/* –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å */}
            <div className="space-y-2">
              <h3 className="text-sm font-semibold text-foreground flex items-center gap-2">
                <span className="w-6 h-6 rounded-full bg-blue-500/20 flex items-center justify-center text-xs text-blue-500">1</span>
                –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
              </h3>
              <p className="text-sm text-muted-foreground pl-8">{help.howToUse}</p>
            </div>

            {/* –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç */}
            <div className="space-y-2">
              <h3 className="text-sm font-semibold text-foreground flex items-center gap-2">
                <span className="w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center text-xs text-green-500">2</span>
                –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç
              </h3>
              <p className="text-sm text-muted-foreground pl-8">{help.whatHappens}</p>
            </div>

            {/* –ü—Ä–∏–º–µ—Ä –≤ —á–∞—Ç–µ */}
            {help.chatExample && (
              <div className="space-y-3">
                <h3 className="text-sm font-semibold text-foreground flex items-center gap-2">
                  <span className="w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center text-xs text-purple-500">3</span>
                  –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤ —á–∞—Ç–µ
                </h3>
                <div className="ml-8 rounded-xl bg-muted/50 p-4 space-y-2">
                  {help.chatExample.messages.map((msg, idx) => (
                    <motion.div
                      key={idx}
                      initial={{ opacity: 0, x: msg.type === 'user' ? 10 : -10 }}
                      animate={{ opacity: 1, x: 0 }}
                      transition={{ delay: idx * 0.15 }}
                      className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}
                    >
                      {msg.type === 'typing' ? (
                        <div className="flex items-center gap-2 text-xs text-muted-foreground">
                          <div className="flex gap-1">
                            <motion.span 
                              animate={{ opacity: [0.3, 1, 0.3] }} 
                              transition={{ duration: 1, repeat: Infinity, delay: 0 }}
                              className="w-1.5 h-1.5 rounded-full bg-muted-foreground"
                            />
                            <motion.span 
                              animate={{ opacity: [0.3, 1, 0.3] }} 
                              transition={{ duration: 1, repeat: Infinity, delay: 0.2 }}
                              className="w-1.5 h-1.5 rounded-full bg-muted-foreground"
                            />
                            <motion.span 
                              animate={{ opacity: [0.3, 1, 0.3] }} 
                              transition={{ duration: 1, repeat: Infinity, delay: 0.4 }}
                              className="w-1.5 h-1.5 rounded-full bg-muted-foreground"
                            />
                          </div>
                          <span>{msg.text}</span>
                        </div>
                      ) : (
                        <div
                          className={`max-w-[80%] px-3 py-2 rounded-2xl text-sm ${
                            msg.type === 'user'
                              ? 'bg-primary text-primary-foreground rounded-br-md'
                              : 'bg-background border border-border rounded-bl-md'
                          }`}
                        >
                          {msg.text}
                        </div>
                      )}
                    </motion.div>
                  ))}
                </div>
              </div>
            )}

            {/* –°–æ–≤–µ—Ç—ã */}
            {help.tips && help.tips.length > 0 && (
              <div className="space-y-2">
                <h3 className="text-sm font-semibold text-foreground flex items-center gap-2">
                  <span className="w-6 h-6 rounded-full bg-amber-500/20 flex items-center justify-center text-xs text-amber-500">üí°</span>
                  –°–æ–≤–µ—Ç—ã
                </h3>
                <ul className="pl-8 space-y-1">
                  {help.tips.map((tip, idx) => (
                    <li key={idx} className="text-sm text-muted-foreground flex items-start gap-2">
                      <span className="text-amber-500 mt-0.5">‚Ä¢</span>
                      {tip}
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </div>
        </ScrollArea>
      </motion.div>
    </motion.div>
  );
}